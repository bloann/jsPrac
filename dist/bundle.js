(()=>{"use strict";var e,t,o,n,c,a,r,l,i,u,s,d,m,v;setInterval((function(e){var t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");!function c(){var a,r,l,i,u,s,d=(l=((a=new Date(e).getTime())-(r=(new Date).getTime()))/1e3,i=Math.floor(l%60),u=Math.floor(l/60%60),s=Math.floor(l/60/60),a<r?{timeReamaining:0,hours:0,seconds:0,minutes:0}:{timeReamaining:l,hours:s,minutes:u,seconds:i});function m(e){return e<10&&(e="0"+e),e}t.textContent=m(d.hours),o.textContent=m(d.minutes),n.textContent=m(d.seconds),d.timeReamaining>0&&setTimeout(c)}()}),1e3,"31 march 2021"),v=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;(t.closest("menu")||t.closest(".menu")||"MENU"!==t.nodeName&&v.classList.contains("active-menu"))&&v.classList.toggle("active-menu")})),u=document.querySelector(".popup"),s=document.querySelectorAll(".popup-btn"),d=document.querySelector(".popup-close"),m=document.querySelector(".popup-content"),s.forEach((function(e){e.addEventListener("click",(function(){if(screen.width>768){u.style.display="block";var e=Date.now(),t=setInterval((function(){var o=Date.now()-e;o>=2e3?clearInterval(t):function(e){m.style.top=e/10+"px"}(o)}),20)}else u.style.display="block"}))})),d.addEventListener("click",(function(){u.style.display="none"})),u.addEventListener("click",(function(e){var t=e.target;t.classList.contains(".popup-close")&&(u.style.display="none"),(t=t.closest(".popup-content"))||(u.style.display="none")})),document.querySelectorAll("a").forEach((function(e){("close-btn"!==e.className&&e.closest("menu")||e.closest("img "))&&e.addEventListener("click",(function(t){t.preventDefault();var o=e.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}))})),r=document.querySelector(".service-header"),l=r.querySelectorAll(".service-header-tab"),i=document.querySelectorAll(".service-tab"),r.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&l.forEach((function(e,o){e===t&&function(e){for(var t=0;t<i.length;t++)e===t?(l[t].classList.add("active"),i[t].classList.remove("d-none")):(l[t].classList.remove("active"),i[t].classList.add("d-none"))}(o)}))})),function(){for(var e,t=document.querySelectorAll(".portfolio-item"),o=(document.querySelector(".portfolio-btn"),document.querySelector(".portfolio-dots")),n=document.querySelector(".portfolio-content"),c=0,a=0;a<t.length;a++){var r=document.createElement("li");o.appendChild(r)}o.querySelectorAll("li").forEach((function(e,t){e.classList.add("dot"),0===t&&e.classList.add("dot-active")}));var l=document.querySelectorAll(".dot"),i=function(e,t,o){e[t].classList.remove(o)},u=function(e,t,o){e[t].classList.add(o)},s=function(){i(t,c,"portfolio-item-active"),i(l,c,"dot-active"),++c>=t.length&&(c=0),u(t,c,"portfolio-item-active"),u(l,c,"dot-active")},d=function(t){e=setInterval(s,t)};n.addEventListener("click",(function(e){e.preventDefault();var o=e.target;o.matches(".portfolio-btn, .dot")&&(i(t,c,"portfolio-item-active"),i(l,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&l.forEach((function(e,t){e===o&&(c=t)})),c>=t.length&&(c=0),c<0&&(c=t.length-1),u(t,c,"portfolio-item-active"),u(l,c,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&d(2e3)})),d(2e3)}(),c=document.getElementById("command"),a=c.querySelectorAll(".command__photo"),c.addEventListener("mouseover",(function(e){var t=e.target;a.forEach((function(e){if(e===t){var o=t.src;t.src=t.dataset.img,t.dataset.img=o}}))})),c.addEventListener("mouseout",(function(e){var t=e.target;a.forEach((function(e){if(e===t){var o=t.src;t.src=t.dataset.img,t.dataset.img=o}}))})),(n=document.querySelectorAll("input")).forEach((function(e){e.addEventListener("input",(function(){n.forEach((function(e){e.closest(".calc-block")?e.value=e.value.replace(/[^\d+]/g,""):"Ваше имя"===e.placeholder||"Ваше сообщение"===e.placeholder?e.value=e.value.replace(/[^а-яё\ \-]/gi,""):"email"===e.type?e.value=e.value.replace(/[^a-z\@\-\_\.\!\~\*\']/gi,""):"tel"===e.type&&(e.value=e.value.replace(/[^\d+\()\-\+]/gi,""))}))})),e.addEventListener("blur",(function(e){var t=e.target;t.value=t.value.replace(/\-+/g,"-");var o=t.value.match(/./g);if(o){for(var n=0;n<o.length;n++)0!==n&&n!==o.length||" "!==o[n]&&"-"!==o[n]||o.splice(n,1);t.value=o.join(""),"Ваше имя"===t.placeholder&&(t.value=t.value[0].toUpperCase()+t.value.slice(1))}}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),r=document.getElementById("total"),l=function(e,t,o,n){var c=null;window.requestAnimationFrame((function a(r){c||(c=r);var l=Math.min((r-c)/n,1);e.innerHTML=Math.floor(l*(o-t)+t),l<1&&window.requestAnimationFrame(a)}))},i=function(){var t,i=1,u=1,s=o.options[o.selectedIndex].value,d=+n.value;a.value>1&&(i+=(a.value-1)/10),c.value<5&&c.value?u*=2:c.value<10&&c.value&&(u*=1.5),t=s&&d?Math.floor(e*s*d*i*u):0,l(r,0,t,750)};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&i()}))}(100),e="Что-то пошло не так!",t=document.querySelectorAll("form"),(o=document.createElement("div")).style.cssText="margin: 10px; color: white; font-size: 2rem;",t.forEach((function(t){t.addEventListener("submit",(function(t){t.preventDefault();var n=t.target;n.appendChild(o),o.textContent="Загрузка...";var c,a=new FormData(n);(c=a,c.forEach((function(e,t){c[t]=e})),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).then((function(t){if(200!==t.status)throw o.textContent=e,new Error("status network not 200");o.textContent="Спасибо! Мы скоро с вами свяжемся!"})).catch((function(t){o.textContent=e,console.error(t)})),n.querySelectorAll("input").forEach((function(e){return e.value=""}))}))}))})();